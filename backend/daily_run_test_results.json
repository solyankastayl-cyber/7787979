{
  "summary": "L4.1 Daily Run Orchestrator Backend Testing",
  "tests_passed": 30,
  "tests_total": 30,
  "success_rate": "100.0%",
  "timestamp": "2026-02-22T11:02:46.715566",
  "test_details": [
    {
      "test_name": "Daily Run Pipeline (BTC)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.004621",
      "details": "RunId: run-1771758165957-2dcn0i, Steps: 10/10, Duration: 21ms",
      "error": null,
      "response_data": {
        "ok": true,
        "data": {
          "ok": true,
          "runId": "run-1771758165957-2dcn0i",
          "asset": "BTC",
          "mode": "DEV",
          "durationMs": 21,
          "steps": [
            {
              "name": "SNAPSHOT_WRITE",
              "ok": true,
              "ms": 0,
              "details": {
                "written": 0,
                "skipped": 0,
                "note": "Delegated to asset-specific service"
              }
            },
            {
              "name": "OUTCOME_RESOLVE",
              "ok": true,
              "ms": 0,
              "details": {
                "resolved": 0,
                "note": "Delegated to asset-specific service"
              }
            },
            {
              "name": "LIVE_SAMPLE_UPDATE",
              "ok": true,
              "ms": 0,
              "details": {
                "before": 66,
                "after": 66,
                "delta": 0
              }
            },
            {
              "name": "DRIFT_CHECK",
              "ok": true,
              "ms": 15,
              "details": {
                "severity": "OK",
                "revoked": false,
                "recovered": false
              }
            },
            {
              "name": "LIFECYCLE_HOOKS",
              "ok": true,
              "ms": 2,
              "details": {
                "statusBefore": "WARMUP",
                "statusAfter": "WARMUP",
                "transition": null,
                "events": []
              }
            },
            {
              "name": "WARMUP_PROGRESS_WRITE",
              "ok": true,
              "ms": 2,
              "details": {
                "before": 100,
                "after": 100,
                "status": "WARMUP"
              }
            },
            {
              "name": "AUTO_PROMOTE",
              "ok": true,
              "ms": 0,
              "details": {
                "promoted": false,
                "blocked": false,
                "reason": "Not in PROD mode"
              }
            },
            {
              "name": "INTEL_TIMELINE_WRITE",
              "ok": true,
              "ms": 0,
              "details": {
                "written": false,
                "note": "Delegated to intel module"
              }
            },
            {
              "name": "ALERTS_DISPATCH",
              "ok": true,
              "ms": 0,
              "details": {
                "sent": 0,
                "blocked": 0,
                "note": "Delegated to alerts module"
              }
            },
            {
              "name": "INTEGRITY_GUARD",
              "ok": true,
              "ms": 1,
              "details": {
                "valid": true,
                "fixes": []
              }
            }
          ],
          "lifecycle": {
            "before": {
              "status": "WARMUP",
              "systemMode": "DEV",
              "liveSamples": 66,
              "warmupProgress": 100,
              "driftSeverity": "OK",
              "constitutionHash": "new_constitution_hash_123"
            },
            "after": {
              "status": "WARMUP",
              "systemMode": "DEV",
              "liveSamples": 66,
              "warmupProgress": 100,
              "driftSeverity": "OK",
              "constitutionHash": "new_constitution_hash_123"
            },
            "transition": null
          },
          "metrics": {
            "snapshotsWritten": 0,
            "outcomesResolved": 0,
            "liveSamplesBefore": 66,
            "liveSamplesAfter": 66,
            "driftSeverity": "OK",
            "warmupProgressBefore": 100,
            "warmupProgressAfter": 100
          },
          "warnings": [],
          "errors": []
        }
      }
    },
    {
      "test_name": "Daily Run Pipeline (SPX)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.146543",
      "details": "RunId: run-1771758166117-l1n2ff, Steps: 10/10, Duration: 8ms",
      "error": null,
      "response_data": {
        "ok": true,
        "data": {
          "ok": true,
          "runId": "run-1771758166117-l1n2ff",
          "asset": "SPX",
          "mode": "DEV",
          "durationMs": 8,
          "steps": [
            {
              "name": "SNAPSHOT_WRITE",
              "ok": true,
              "ms": 0,
              "details": {
                "written": 0,
                "skipped": 0,
                "note": "Delegated to asset-specific service"
              }
            },
            {
              "name": "OUTCOME_RESOLVE",
              "ok": true,
              "ms": 0,
              "details": {
                "resolved": 0,
                "note": "Delegated to asset-specific service"
              }
            },
            {
              "name": "LIVE_SAMPLE_UPDATE",
              "ok": true,
              "ms": 0,
              "details": {
                "before": 10,
                "after": 10,
                "delta": 0
              }
            },
            {
              "name": "DRIFT_CHECK",
              "ok": true,
              "ms": 2,
              "details": {
                "severity": "OK",
                "revoked": false,
                "recovered": false
              }
            },
            {
              "name": "LIFECYCLE_HOOKS",
              "ok": true,
              "ms": 1,
              "details": {
                "statusBefore": "SIMULATION",
                "statusAfter": "SIMULATION",
                "transition": null,
                "events": []
              }
            },
            {
              "name": "WARMUP_PROGRESS_WRITE",
              "ok": true,
              "ms": 1,
              "details": {
                "before": 0,
                "after": 0,
                "status": "SIMULATION"
              }
            },
            {
              "name": "AUTO_PROMOTE",
              "ok": true,
              "ms": 0,
              "details": {
                "promoted": false,
                "blocked": false,
                "reason": "Not in PROD mode"
              }
            },
            {
              "name": "INTEL_TIMELINE_WRITE",
              "ok": true,
              "ms": 0,
              "details": {
                "written": false,
                "note": "Delegated to intel module"
              }
            },
            {
              "name": "ALERTS_DISPATCH",
              "ok": true,
              "ms": 0,
              "details": {
                "sent": 0,
                "blocked": 0,
                "note": "Delegated to alerts module"
              }
            },
            {
              "name": "INTEGRITY_GUARD",
              "ok": true,
              "ms": 1,
              "details": {
                "valid": true,
                "fixes": []
              }
            }
          ],
          "lifecycle": {
            "before": {
              "status": "SIMULATION",
              "systemMode": "DEV",
              "liveSamples": 10,
              "warmupProgress": 0,
              "driftSeverity": "OK",
              "constitutionHash": "test_hash_spx"
            },
            "after": {
              "status": "SIMULATION",
              "systemMode": "DEV",
              "liveSamples": 10,
              "warmupProgress": 0,
              "driftSeverity": "OK",
              "constitutionHash": "test_hash_spx"
            },
            "transition": null
          },
          "metrics": {
            "snapshotsWritten": 0,
            "outcomesResolved": 0,
            "liveSamplesBefore": 10,
            "liveSamplesAfter": 10,
            "driftSeverity": "OK",
            "warmupProgressBefore": 0,
            "warmupProgressAfter": 0
          },
          "warnings": [],
          "errors": []
        }
      }
    },
    {
      "test_name": "Step Timing - SNAPSHOT_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147210",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - OUTCOME_RESOLVE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147221",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - LIVE_SAMPLE_UPDATE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147226",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - DRIFT_CHECK",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147231",
      "details": "15ms",
      "error": null
    },
    {
      "test_name": "Step Timing - LIFECYCLE_HOOKS",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147236",
      "details": "2ms",
      "error": null
    },
    {
      "test_name": "Step Timing - WARMUP_PROGRESS_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147243",
      "details": "2ms",
      "error": null
    },
    {
      "test_name": "Step Timing - AUTO_PROMOTE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147249",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - INTEL_TIMELINE_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147255",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - ALERTS_DISPATCH",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147260",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - INTEGRITY_GUARD",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147264",
      "details": "1ms",
      "error": null
    },
    {
      "test_name": "Step Timing - SNAPSHOT_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147269",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - OUTCOME_RESOLVE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147273",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - LIVE_SAMPLE_UPDATE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147277",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - DRIFT_CHECK",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147282",
      "details": "2ms",
      "error": null
    },
    {
      "test_name": "Step Timing - LIFECYCLE_HOOKS",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147286",
      "details": "1ms",
      "error": null
    },
    {
      "test_name": "Step Timing - WARMUP_PROGRESS_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147291",
      "details": "1ms",
      "error": null
    },
    {
      "test_name": "Step Timing - AUTO_PROMOTE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147295",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - INTEL_TIMELINE_WRITE",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147299",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - ALERTS_DISPATCH",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147304",
      "details": "0ms",
      "error": null
    },
    {
      "test_name": "Step Timing - INTEGRITY_GUARD",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147308",
      "details": "1ms",
      "error": null
    },
    {
      "test_name": "Lifecycle Before Capture",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147319",
      "details": "Status: WARMUP, Samples: 66",
      "error": null
    },
    {
      "test_name": "Lifecycle After Capture",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147325",
      "details": "Status: WARMUP, Samples: 66",
      "error": null
    },
    {
      "test_name": "Lifecycle Transition Detection",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.147329",
      "details": "No status change, no transition (correct)",
      "error": null
    },
    {
      "test_name": "Daily Run Status (BTC)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.254320",
      "details": "Found last run: DAILY_RUN_COMPLETED at 2026-02-22T11:02:45.957Z, RunId: run-1771758165957-2dcn0i",
      "error": null,
      "response_data": {
        "ok": true,
        "data": {
          "lastRun": {
            "_id": "699ae2559d5ee4b075ff6889",
            "modelId": "BTC",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T11:02:45.957Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771758165957-2dcn0i",
              "durationMs": 21,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          }
        }
      }
    },
    {
      "test_name": "Daily Run Status (SPX)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.395906",
      "details": "Found last run: DAILY_RUN_COMPLETED at 2026-02-22T11:02:46.117Z, RunId: run-1771758166117-l1n2ff",
      "error": null,
      "response_data": {
        "ok": true,
        "data": {
          "lastRun": {
            "_id": "699ae2569d5ee4b075ff688a",
            "modelId": "SPX",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T11:02:46.117Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771758166117-l1n2ff",
              "durationMs": 8,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          }
        }
      }
    },
    {
      "test_name": "Daily Run History (BTC)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.510951",
      "details": "Found 3 historical runs, Latest: 2026-02-22T11:02:45.957Z",
      "error": null,
      "response_data": {
        "ok": true,
        "data": [
          {
            "_id": "699ae2559d5ee4b075ff6889",
            "modelId": "BTC",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T11:02:45.957Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771758165957-2dcn0i",
              "durationMs": 21,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          },
          {
            "_id": "699ae1f19d5ee4b075ff6888",
            "modelId": "BTC",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T11:01:04.998Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771758064998-bx9w2f",
              "durationMs": 11,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          },
          {
            "_id": "699ae1a29d5ee4b075ff6864",
            "modelId": "BTC",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T10:59:46.412Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771757986412-gu9ud7",
              "durationMs": 16,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          }
        ]
      }
    },
    {
      "test_name": "Daily Run History (SPX)",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.614134",
      "details": "Found 2 historical runs, Latest: 2026-02-22T11:02:46.117Z",
      "error": null,
      "response_data": {
        "ok": true,
        "data": [
          {
            "_id": "699ae2569d5ee4b075ff688a",
            "modelId": "SPX",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T11:02:46.117Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771758166117-l1n2ff",
              "durationMs": 8,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          },
          {
            "_id": "699ae1a89d5ee4b075ff6865",
            "modelId": "SPX",
            "engineVersion": "v2.1",
            "ts": "2026-02-22T10:59:52.153Z",
            "type": "DAILY_RUN_COMPLETED",
            "actor": "SYSTEM",
            "meta": {
              "runId": "run-1771757992153-v0t3lz",
              "durationMs": 7,
              "ok": true,
              "stepsOk": 10,
              "stepsTotal": 10,
              "transition": null,
              "warnings": [],
              "errors": []
            }
          }
        ]
      }
    },
    {
      "test_name": "Invalid Asset Validation",
      "passed": true,
      "timestamp": "2026-02-22T11:02:46.714305",
      "details": "Correctly rejected invalid asset",
      "error": null
    }
  ],
  "failed_tests": []
}